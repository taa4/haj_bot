# -*- coding: utf-8 -*-
from telegram import Update, ReplyKeyboardMarkup
from telegram.ext import ApplicationBuilder, CommandHandler, MessageHandler, ContextTypes, filters
from telegram import Update, ReplyKeyboardMarkup, KeyboardButton
import math
import os
import sys
from telegram.ext import ApplicationBuilder
from telegram.ext import ApplicationBuilder
from dotenv import load_dotenv  # ุฃุถู ูุฐุง

# ุชุญููู ุงูุชููู ูู ููู .env
load_dotenv() 
# ุฅุตูุงุญ ูุดููุฉ ุงูุชุฑููุฒ
sys.stdout.reconfigure(encoding='utf-8')
TOKEN = os.getenv("TELEGRAM_BOT_TOKEN")

HARAM = (21.4225, 39.8262)
SAFA = (21.4229, 39.8257)
MARWA = (21.4237, 39.8267)
# ================= ุงูููุงุฆู =================

main_menu = [
    ["ุงูุญุฌ", "ุงูุนูุฑุฉ"],
    ["ุงูุฃุฏุนูุฉ", "ุงูุฎุฑูุทุฉ"],
    ["ุงูุฃุฎุทุงุก ูุงูููุงุฑุงุช", "ูููุงุช ุงูุฅุญุฑุงู"]
]
miqat_menu = [
    ["ุงูุดุงู (ุณูุฑูุงุ ูุจูุงูุ ุงูุฃุฑุฏูุ ููุณุทูู)"],
    ["ูุตุฑ ูุดูุงู ุฃูุฑูููุง"],
    ["ุงูููู"],
    ["ุฑุฌูุน"]
]

map_menu = [
    ["ุงููุณุฌุฏ ุงูุญุฑุงู"],
    ["ุงูุตูุง", "ุงููุฑูุฉ"],
    ["ูููุนู ุงูุญุงูู"],
    ["ุฑุฌูุน"]
]
dua_menu = [
    ["ุฃุฏุนูุฉ ุงูุฅุญุฑุงู", "ุฃุฏุนูุฉ ุงูุทูุงู"],
    ["ุฃุฏุนูุฉ ุงูุณุนู", "ุฃุฏุนูุฉ ุนุฑูุฉ"],
    ["ุฃุฏุนูุฉ ุงูุฌูุฑุงุช", "ุฃุฏุนูุฉ ุนุงูุฉ"],
    ["ุฑุฌูุน"]
]
back_menu = [["ุฑุฌูุน ูููุงุฆูุฉ ุงูุฑุฆูุณูุฉ"]]

mistakes_menu = [
    ["ูุจุณ ุงููุฎูุท", "ุงูุชุทูุจ ุจุนุฏ ุงูุฅุญุฑุงู"],
    ["ูุต ุงูุดุนุฑ ุฃู ุงูุฃุธุงูุฑ", "ุชุบุทูุฉ ุงูุฑุฃุณ"],
    ["ุงูุทูุงู ุจุฏูู ูุถูุก", "ูุณู ุดูุท"],
    ["ุงูุณุนู ูุจู ุงูุทูุงู", "ุชุฑู ูุงุฌุจ"],
    ["ุงูุฌูุงุน"],
    ["ุฑุฌูุน"]
]

markup_main = ReplyKeyboardMarkup(main_menu, resize_keyboard=True)
markup_back = ReplyKeyboardMarkup(back_menu, resize_keyboard=True)
markup_dua = ReplyKeyboardMarkup(
    dua_menu, resize_keyboard=True)
markup_miqat = ReplyKeyboardMarkup(miqat_menu, resize_keyboard=True)
markup_map = ReplyKeyboardMarkup(map_menu, resize_keyboard=True)
markup_mistakes = ReplyKeyboardMarkup(mistakes_menu, resize_keyboard=True)
# ุฒุฑ ูุดุงุฑูุฉ ุงููููุน
location_keyboard = ReplyKeyboardMarkup(
    [[KeyboardButton("ุฅุฑุณุงู ูููุนู", request_location=True)],
     ["ุฑุฌูุน"]],
    resize_keyboard=True
)
# ================= ุญุณุงุจ ุงููุณุงูุฉ =================


def distance_m(lat1, lon1, lat2, lon2):
    R = 6371000
    phi1 = math.radians(lat1)
    phi2 = math.radians(lat2)
    dphi = math.radians(lat2 - lat1)
    dlambda = math.radians(lon2 - lon1)

    a = math.sin(dphi/2)**2 + math.cos(phi1) * \
        math.cos(phi2)*math.sin(dlambda/2)**2
    return int(R * (2 * math.atan2(math.sqrt(a), math.sqrt(1-a))))
# ================= start =================


async def start(update: Update, context: ContextTypes.DEFAULT_TYPE):
    await update.message.reply_text(
        "ูุฑุญุจุง ุจู ูู ูุณุงุนุฏ ุงูุญุฌ ูุงูุนูุฑุฉ\nุงุฎุชุฑ ูู ุงููุงุฆูุฉ:",
        reply_markup=markup_main
    )

# ================= ุงูุญุฌ =================


async def handle_hajj(update: Update, context: ContextTypes.DEFAULT_TYPE):
    text = (
        "ููุงุณู ุงูุญุฌ ุจุงูุชูุตูู:\n\n"
        "1๏ธโฃ ุงูุฅุญุฑุงู ูู ุงููููุงุช:\n"
        "- ูุจู ุฏุฎูู ููุฉุ ูุจุฏุฃ ุงูุญุงุฌ ุจุงูููุฉ (ุงูุญุฌ ุฃู ุงูุนูุฑุฉ)\n"
        "- ูุฑุชุฏู ููุงุจุณ ุงูุฅุญุฑุงู (ุฅุฒุงุฑ ูุฑุฏุงุก ููุฑุฌุงูุ ูููุงุจุณ ูุญุชุดูุฉ ูููุณุงุก)\n"
        "- ููุชุฒู ุจุงูุชูุจูุฉ: 'ูุจูู ุงูููู ุญุฌูุง'\n"
        "- ูุจุชุนุฏ ุนู ุงููุญุฑูุงุช ูุซู ุงููุตุ ุงูุทูุจุ ุงูุฌูุงุน.\n\n"

        "2๏ธโฃ ุทูุงู ุงููุฏูู:\n"
        "- ุงูุทูุงู ุญูู ุงููุนุจุฉ 7 ุฃุดูุงุท\n"
        "- ูุจุฏุฃ ูู ุงูุฑูู ุงูุฃุณูุฏ ูููุชูู ุนูุฏู\n"
        "- ูุฑูุน ุงููุฏูู ุนูุฏ ุงูุญุฌุฑ ุงูุฃุณูุฏ ููุชุณููู ูุงูุฏุนุงุก\n\n"

        "3๏ธโฃ ุงูุณุนู ุจูู ุงูุตูุง ูุงููุฑูุฉ:\n"
        "- ุงูุณุนู 7 ุฃุดูุงุท ุจูู ุงูุตูุง ูุงููุฑูุฉ\n"
        "- ูุจุฏุฃ ูู ุงูุตูุง ูููุชูู ุจุงููุฑูุฉ\n"
        "- ูุณู ุงูุฏุนุงุก ูุงูุฃุฐูุงุฑ ุฃุซูุงุก ุงูุณุนู\n\n"

        "4๏ธโฃ ููู ุงูุชุฑููุฉ (ููู):\n"
        "- ุงูุชูุฌู ุฅูู ููู ูุจู ููู ุนุฑูุฉ\n"
        "- ุงููุจูุช ูู ููู ุงุณุชุนุฏุงุฏูุง ูููู ุนุฑูุฉ\n"
        "- ุงูููุงู ุจุงูุนุจุงุฏุงุช ูุงูุฏุนุงุก\n\n"

        "5๏ธโฃ ุงููููู ุจุนุฑูุฉ:\n"
        "- ุงูุฑูู ุงูุฃุนุธู ููุญุฌ\n"
        "- ุงููููู ุนูู ุฌุจู ุนุฑูุฉ ูุงูุฏุนุงุก ูุงูุชุถุฑุน\n"
        "- ุงูุตูุงุฉ ูุงูุฐูุฑ ุญุชู ุบุฑูุจ ุงูุดูุณ\n\n"

        "6๏ธโฃ ุงููุจูุช ูู ูุฒุฏููุฉ:\n"
        "- ุจุนุฏ ุบุฑูุจ ุงูุดูุณ ูู ุนุฑูุฉุ ุงูุชูุฌู ุฅูู ูุฒุฏููุฉ\n"
        "- ุงููุจูุช ููุงู ูุน ุงูุญุฌุงุฌ ุงูุขุฎุฑูู\n"
        "- ุฌูุน ุญุตู ูุฑูู ุงูุฌูุงุฑ\n\n"

        "7๏ธโฃ ุฑูู ุฌูุฑุฉ ุงูุนูุจุฉ:\n"
        "- ุจุนุฏ ุนูุฏ ุงูุฃุถุญูุ ุฑูู ุฌูุฑุฉ ุงูุนูุจุฉ 7 ุญุตูุงุช\n"
        "- ุงูุฏุนุงุก ุนูุฏ ุงูุฑูู ูุงูุชุณููู\n\n"

        "8๏ธโฃ ุงูุญูู ุฃู ุงูุชูุตูุฑ:\n"
        "- ุงูุฐููุฑ: ุญูู ุงูุฑุฃุณ ุฃู ุชูุตูุฑ ุงูุดุนุฑ\n"
        "- ุงูุฅูุงุซ: ูุต ุฌุฒุก ูู ุงูุดุนุฑ\n\n"

        "9๏ธโฃ ุทูุงู ุงูุฅูุงุถุฉ:\n"
        "- ุทูุงู ูุงุฌุจ ุจุนุฏ ุงูุนูุฏุฉ ูู ููู\n"
        "- 7 ุฃุดูุงุท ุญูู ุงููุนุจุฉ\n"
        "- ุงูุฏุนุงุก ูุงูุฐูุฑ ุฃุซูุงุก ุงูุทูุงู\n\n"

        "๐ ุฃูุงู ุงูุชุดุฑูู ูุฑูู ุงูุฌูุฑุงุช:\n"
        "- ุฑูู ุงูุฌูุฑุงุช ุงูุตุบูุฑุฉ ูุงููุจูุฑุฉ ุฃูุงู 11ุ 12ุ 13 ูู ุฐู ุงูุญุฌุฉ\n"
        "- 7 ุญุตูุงุช ููู ุฌูุฑุฉ\n"
        "- ุงูุฏุนุงุก ุจุนุฏ ูู ุฑูู\n\n"

        "1๏ธโฃ1๏ธโฃ ุทูุงู ุงููุฏุงุน:\n"
        "- ุงูุทูุงู ุงูุฃุฎูุฑ ุนูุฏ ูุบุงุฏุฑุฉ ููุฉ\n"
        "- ูููู ุงูุฏุนุงุก ูุงูุชุณููู ุนูู ุงููุนุจุฉ\n"
        "- ุงูุงูุชูุงุก ูู ููุงุณู ุงูุญุฌ"

    )
    await update.message.reply_text(text, reply_markup=markup_back)

# ================= ุงูุนูุฑุฉ =================


async def handle_umrah(update: Update, context: ContextTypes.DEFAULT_TYPE):
    text = (
        "ููุงุณู ุงูุนูุฑุฉ ุฎุทูุฉ ุฎุทูุฉ:\n\n"
        "1๏ธโฃ ุงูุฅุญุฑุงู ูู ุงููููุงุช\n"
        "   - ุญุฏุฏ ุงููููุงุช ุญุณุจ ุจูุฏู (ุงูุดุงูุ ูุตุฑุ ุงูููู)\n"
        "   - ุงูููุฉ: ูุจูู ุงูููู ุนูุฑุฉ\n"
        "   - ุงูุงูุชุฒุงู ุจุงูุณูู: ุงูุชูุจูุฉุ ุชุฌูุจ ุงููุญุฑูุงุช\n\n"
        "2๏ธโฃ ุงูุทูุงู ุญูู ุงููุนุจุฉ (7 ุฃุดูุงุท)\n"
        "   - ุงูุทูุงู ูุจุฏุฃ ูู ุงูุฑูู ุงูุฃุณูุฏ\n"
        "   - ุงูุชุณููู ุนูุฏ ุงูุญุฌุฑ ุงูุฃุณูุฏ\n"
        "   - ุงูุฃุฏุนูุฉ ุฃุซูุงุก ุงูุทูุงู: 'ุฑุจูุง ุขุชูุง ูู ุงูุฏููุง ุญุณูุฉ ููู ุงูุขุฎุฑุฉ ุญุณูุฉ'\n\n"
        "3๏ธโฃ ุงูุตูุงุฉ ุฎูู ููุงู ุฅุจุฑุงููู (ุฑูุนุชูู)\n\n"
        "4๏ธโฃ ุงูุณุนู ุจูู ุงูุตูุง ูุงููุฑูุฉ (7 ุฃุดูุงุท)\n"
        "   - ูุจุฏุฃ ูู ุงูุตูุง ูููุชูู ุจุงููุฑูุฉ\n"
        "   - ุงูุฃุฏุนูุฉ: 'ุฑุจ ุงุบูุฑ ูุงุฑุญู ูุชุฌุงูุฒ ุนูุง ุชุนูู'\n\n"
        "5๏ธโฃ ุงูุญูู ุฃู ุงูุชูุตูุฑ\n"
        "   - ุงูุฐููุฑ: ุงูุญูู ุฃู ุงูุชูุตูุฑ\n"
        "   - ุงูุฅูุงุซ: ูุต ุฌุฒุก ูู ุงูุดุนุฑ\n\n"
        "๐ก ููุงุญุธุงุช:\n"
        "- ูุง ููุฌุฏ ูููู ุจุนุฑูุฉ ููุง ุฑูู ุฌูุฑุงุช ูู ุงูุนูุฑุฉ.\n"
        "- ุงูุงูุชุฒุงู ุจุงูุขุฏุงุจ ูุงูุณูู ูุณูู ูุจูู ุงูุนูุฑุฉ.\n"
        "- ุงุณุชุฎุฏุงู ุงูุจูุช ููุฎุฑุงุฆุท ูุงูุฃุฏุนูุฉ ุฎุทูุฉ ุฎุทูุฉ."
    )
    await update.message.reply_text(text, reply_markup=markup_back)
# ================= ุงูุฃุฏุนูุฉ ุงูุนูููุฉ =================


async def duas_menu(update, context):
    await update.message.reply_text(
        "ุงุฎุชุฑ ููุน ุงูุฃุฏุนูุฉ:",
        reply_markup=markup_dua
    )


async def dua_ihram(update, context):
    text = (
        "ุฃุฏุนูุฉ ุงูุฅุญุฑุงู:\n\n"
        "ุงูููู ุฅูู ูููุช ุงูุนูุฑุฉ/ุงูุญุฌ ููุณุฑู ูู ูุชูุจูู ููู.\n\n"
        "ุงูููู ุฅูู ุฃุณุฃูู ุฑุถุงู ูุงูุฌูุฉุ ูุฃุนูุฐ ุจู ูู ุณุฎุทู ูุงููุงุฑ.\n\n"
        "ูุจูู ุงูููู ูุจููุ ูุจูู ูุง ุดุฑูู ูู ูุจูู."
    )
    await update.message.reply_text(text)


async def dua_tawaf(update, context):
    text = (
        "ุฃุฏุนูุฉ ุงูุทูุงู:\n\n"
        "ุฑุจูุง ุขุชูุง ูู ุงูุฏููุง ุญุณูุฉ ููู ุงูุขุฎุฑุฉ ุญุณูุฉ ูููุง ุนุฐุงุจ ุงููุงุฑ.\n\n"
        "ุงูููู ุงุบูุฑ ูุงุฑุญู ูุงุนู ุนูุง ุชุนููุ ุฅูู ุฃูุช ุงูุฃุนุฒ ุงูุฃูุฑู.\n\n"
        "ุงูููู ุงุฌุนูู ุทูุงููุง ููุจูููุง ูุณุนููุง ูุดููุฑูุง."
    )
    await update.message.reply_text(text)


async def dua_saee(update, context):
    text = (
        "ุฃุฏุนูุฉ ุงูุณุนู:\n\n"
        "ุฑุจ ุงุบูุฑ ูุงุฑุญู ูุชุฌุงูุฒ ุนูุง ุชุนูู.\n\n"
        "ุงูููู ุงุฌุนููู ูู ุงูููุจูููู.\n\n"
        "ุฑุจูุง ุชูุจู ููุง ุฅูู ุฃูุช ุงูุณููุน ุงูุนููู."
    )
    await update.message.reply_text(text)


async def dua_arafah(update, context):
    text = (
        "ุฃุฏุนูุฉ ููู ุนุฑูุฉ:\n\n"
        "ูุง ุฅูู ุฅูุง ุงููู ูุญุฏู ูุง ุดุฑูู ููุ ูู ุงูููู ููู ุงูุญูุฏ ููู ุนูู ูู ุดูุก ูุฏูุฑ.\n\n"
        "ุงูููู ุงุบูุฑ ูู ูููุงูุฏู ููููุคูููู ูุงููุคููุงุช.\n\n"
        "ุงูููู ุฃุตูุญ ูู ุฏููู ูุฏููุงู ูุขุฎุฑุชู."
    )
    await update.message.reply_text(text)


async def dua_jamarat(update, context):
    text = (
        "ุฃุฏุนูุฉ ุฑูู ุงูุฌูุฑุงุช:\n\n"
        "ุงููู ุฃูุจุฑุ ุฑุบูุง ููุดูุทุงู ูุญุฒุจูู.\n\n"
        "ุงูููู ุงุฌุนูู ุญุฌูุง ูุจุฑูุฑูุง ูุณุนููุง ูุดููุฑูุง.\n\n"
        "ุงูููู ุชูุจู ููู ุฅูู ุฃูุช ุงูุณููุน ุงูุนููู."
    )
    await update.message.reply_text(text)


async def dua_general(update, context):
    text = (
        "ุฃุฏุนูุฉ ุนุงูุฉ:\n\n"
        "ุฑุจ ุงุดุฑุญ ูู ุตุฏุฑู ููุณุฑ ูู ุฃูุฑู.\n\n"
        "ุงูููู ุญุณู ุงูุฎุงุชูุฉ.\n\n"
        "ุงูููู ุงุฌุนู ุขุฎุฑ ููุงููุง ูู ุงูุฏููุง ูุง ุฅูู ุฅูุง ุงููู."
    )
    await update.message.reply_text(text)
# ================= ุงูุฃุฎุทุงุก ุงูุดุงุฆุนุฉ =================


async def mistakes_menu_show(update, context):
    await update.message.reply_text(
        "ุงุฎุชุฑ ุงูุฎุทุฃ ุงูุฐู ููุนุช ููู:",
        reply_markup=markup_mistakes
    )


async def mistake_detail(update, text):
    await update.message.reply_text(text, reply_markup=markup_mistakes)
# ================= ุงูุฎุฑูุทุฉ =================


async def map_menu_show(update, context):
    await update.message.reply_text(
        "ุงุฎุชุฑ ูููุนูุง ูุนุฑุถู ุนูู ุงูุฎุฑูุทุฉ:",
        reply_markup=markup_map
    )


async def send_haram_location(update, context):
    await update.message.reply_location(latitude=21.4225, longitude=39.8262)


async def send_safa_location(update, context):
    await update.message.reply_location(latitude=21.4229, longitude=39.8257)


async def send_marwah_location(update, context):
    await update.message.reply_location(latitude=21.4237, longitude=39.8267)


async def send_current_location(update: Update, context: ContextTypes.DEFAULT_TYPE):
    """
    ูุฑุณู ูููุน ุงูุญุงุฌ ุงูุญุงูู ุญุณุจ ูุง ูุฑุณู ุงูุญุงุฌ ุฒุฑ 'ุฅุฑุณุงู ูููุนู'
    """
    if update.message.location:
        lat = update.message.location.latitude
        lon = update.message.location.longitude
        await update.message.reply_location(latitude=lat, longitude=lon)
        await update.message.reply_text(
            f"ูููุนู ุงูุญุงูู:\n- ุฎุท ุงูุนุฑุถ: {lat}\n- ุฎุท ุงูุทูู: {lon}",
            reply_markup=markup_main
        )
    else:
        await update.message.reply_text(
            "ูู ูุชู ุงุณุชูุจุงู ุงููููุน. ูุฑุฌู ุงูุถุบุท ุนูู ุฒุฑ 'ุฅุฑุณุงู ูููุนู'.",
            reply_markup=location_keyboard
        )

# ================= ูููุงุช ุงูุฅุญุฑุงู =================


async def miqat_sham(update, context):
    text = (
        "๐ ูููุงุช ุงูุดุงู (ุณูุฑูุงุ ูุจูุงูุ ุงูุฃุฑุฏูุ ููุณุทูู)\n"
        "ุงููููุงุช: ุฐู ุงูุญูููุฉ (ุฃุจูุงุฑ ุนูู)\n"
        "ุงูููุงู: ุดูุงู ุบุฑุจ ุงููุฏููุฉ ุงููููุฑุฉุ ุนูู ุทุฑูู ููุฉ.\n\n"
        "ูุงุฐุง ููุนู ุงูุญุงุฌ:\n"
        "- ูุจุฏุฃ ููุฉ ุงูุญุฌ ุฃู ุงูุนูุฑุฉ ูุจู ุฏุฎูู ุงููููุงุช.\n"
        "- ููุจู ุงูุฅุญุฑุงู ูููุชุฒู ุจุงูุณูู: ุงูุชูุจูุฉุ ุชุฌูุจ ุงููุญุฑูุงุช.\n"
        "\n๐ ูููุน ุงููููุงุช ุนูู ุงูุฎุฑูุทุฉ:\n"
        "https://maps.google.com/?q=24.9167,39.6167"
    )
    await update.message.reply_text(text, reply_markup=markup_back)
    await update.message.reply_location(latitude=24.9167, longitude=39.6167)


async def miqat_egypt(update, context):
    text = (
        "๐ ูููุงุช ูุตุฑ ูุฃุฌุฒุงุก ูู ุดูุงู ุฃูุฑูููุง\n"
        "ุงููููุงุช: ุงูุฌุญูุฉ (ุฑุงุจุบ)\n"
        "ุงูููุงู: ุนูู ุงูุทุฑูู ุฅูู ููุฉุ ูุฑุจ ุงูุจุญุฑ ุงูุฃุญูุฑ.\n\n"
        "ูุงุฐุง ููุนู ุงูุญุงุฌ:\n"
        "- ููุฉ ุงูุฅุญุฑุงู\n"
        "- ูุจุณ ููุงุจุณ ุงูุฅุญุฑุงู\n"
        "- ุงูุชูุจูุฉ\n"
        "\n๐ ูููุน ุงููููุงุช ุนูู ุงูุฎุฑูุทุฉ:\n"
        "https://maps.google.com/?q=26.3294,35.3123"
    )
    await update.message.reply_text(text, reply_markup=markup_back)
    await update.message.reply_location(latitude=24.9167, longitude=39.6167)


async def miqat_yemen(update, context):
    text = (
        "๐ ูููุงุช ุงูููู\n"
        "ุงููููุงุช: ูููููู\n"
        "ุงูููุงู: ุดุฑู ููุฉ ุนูู ุญุฏูุฏ ูุฌุฏ.\n\n"
        "ุงูุฅุฌุฑุงุกุงุช:\n"
        "- ูุจู ุงููุตูู ูููููุงุช: ูุจุณ ุงูุฅุญุฑุงู\n"
        "- ููู ููุฉ ุงูุญุฌ: 'ูุจูู ุงูููู ุญุฌูุง'\n"
        "- ุชุฌูุจ ุงููุญุฑูุงุช ุจุนุฏ ุงูุฅุญุฑุงู\n"
        "\n๐ ูููุน ุงููููุงุช ุนูู ุงูุฎุฑูุทุฉ:\n"
        "https://maps.google.com/?q=21.4167,40.6000"
    )
    await update.message.reply_text(text, reply_markup=markup_back)
    await update.message.reply_location(latitude=21.4167, longitude=40.6000)


# ================= ุงูุฑุฏ ุนูู ุงูุฃุฒุฑุงุฑ =================

async def reply(update: Update, context: ContextTypes.DEFAULT_TYPE):
    text = update.message.text.strip()

    if text == "ุงูุญุฌ":
        await handle_hajj(update, context)
    elif text == "ุงูุนูุฑุฉ":
        await handle_umrah(update, context)
    elif text == "ุงูุนูุฑุฉ":
        await start_umrah(update, context)

    elif text == "ุงูุฃุฏุนูุฉ":
        await duas_menu(update, context)

    elif text == "ุฃุฏุนูุฉ ุงูุฅุญุฑุงู":
        await dua_ihram(update, context)

    elif text == "ุฃุฏุนูุฉ ุงูุทูุงู":
        await dua_tawaf(update, context)

    elif text == "ุฃุฏุนูุฉ ุงูุณุนู":
        await dua_saee(update, context)

    elif text == "ุฃุฏุนูุฉ ุนุฑูุฉ":
        await dua_arafah(update, context)

    elif text == "ุฃุฏุนูุฉ ุงูุฌูุฑุงุช":
        await dua_jamarat(update, context)

    elif text == "ุฃุฏุนูุฉ ุนุงูุฉ":
        await dua_general(update, context)
    elif text == "ุงูุฃุฎุทุงุก ูุงูููุงุฑุงุช":
        await mistakes_menu_show(update, context)

    elif text == "ูุจุณ ุงููุฎูุท":
        await mistake_detail(update,
                             "ุงูุฎุทุฃ: ูุจุณ ุงููุฎูุท (ููุฑุฌู)\n\n"
                             "ุงูุญูู: ูุญุธูุฑ ุฅุญุฑุงู ููุง ูุจุทู ุงููุณู\n"
                             "ุงูููุงุฑุฉ: ูุฏูุฉ ุฃุฐู (ุงุฎุชูุงุฑ ูุงุญุฏ)\n"
                             "- ุฐุจุญ ุดุงุฉ\n- ุฃู ุฅุทุนุงู 6 ูุณุงููู\n- ุฃู ุตูุงู 3 ุฃูุงู\n\n"
                             "ูุงุฐุง ุชูุนูุ ุงุฎูุนู ููุฑูุง ูุงุฏูุน ุงููุฏูุฉ."
                             )
    elif text == "ูููุนู ุงูุญุงูู":
        # ุงุทูุจ ูู ุงููุณุชุฎุฏู ุฅุฑุณุงู ูููุนู
        await update.message.reply_text(
            "ูุฑุฌู ุงูุถุบุท ุนูู ุฒุฑ 'ุฅุฑุณุงู ูููุนู' ูุฅุฑุณุงู ูููุนู ุงูุญุงูู:",
            reply_markup=location_keyboard
        )

    elif text == "ุงูุชุทูุจ ุจุนุฏ ุงูุฅุญุฑุงู":
        await mistake_detail(update,
                             "ุงูุฎุทุฃ: ุงุณุชุนูุงู ุงูุทูุจ ุจุนุฏ ุงูุฅุญุฑุงู\n\n"
                             "ุงูุญูู: ูุญุธูุฑ ุฅุญุฑุงู\n"
                             "ุงูููุงุฑุฉ: ูุฏูุฉ ุฃุฐู\n"
                             "ุชูุจูู: ุงูุทูุจ ูุจู ุงูุฅุญุฑุงู ุฌุงุฆุฒ."
                             )

    elif text == "ูุต ุงูุดุนุฑ ุฃู ุงูุฃุธุงูุฑ":
        await mistake_detail(update,
                             "ุงูุฎุทุฃ: ูุต ุงูุดุนุฑ ุฃู ุงูุฃุธุงูุฑ\n\n"
                             "ุงูุญูู: ูุญุธูุฑ ุฅุญุฑุงู\n"
                             "ุงูููุงุฑุฉ: ูุฏูุฉ ุฃุฐู\n"
                             "ุชูุจูู: ุงูุฌุงูู ูุงููุงุณู ุนููู ูุฏูุฉ ุนูุฏ ุงูุฌูููุฑ."
                             )

    elif text == "ุชุบุทูุฉ ุงูุฑุฃุณ":
        await mistake_detail(update,
                             "ุงูุฎุทุฃ: ุชุบุทูุฉ ุงูุฑุฃุณ (ููุฑุฌู)\n\n"
                             "ุงูุญูู: ูุญุธูุฑ ุฅุญุฑุงู\n"
                             "ุงูููุงุฑุฉ: ูุฏูุฉ ุฃุฐู\n"
                             "ููุงุญุธุฉ: ุงููุธูุฉ ูุง ุชูุนุฏ ุชุบุทูุฉ."
                             )

    elif text == "ุงูุทูุงู ุจุฏูู ูุถูุก":
        await mistake_detail(update,
                             "ุงูุฎุทุฃ: ุงูุทูุงู ุจุฏูู ูุถูุก\n\n"
                             "ุงูุญูู: ุงูุทูุงู ุบูุฑ ุตุญูุญ ุนูุฏ ุฌูููุฑ ุงูุนููุงุก\n"
                             "ูุง ุงูุนููุ ูุฌุจ ุฅุนุงุฏุฉ ุงูุทูุงู ููุท\n"
                             "ููุงุฑุฉ: ูุง ููุฌุฏ"
                             )

    elif text == "ูุณู ุดูุท":
        await mistake_detail(update,
                             "ุงูุฎุทุฃ: ูุณู ุดูุท ูู ุงูุทูุงู ุฃู ุงูุณุนู\n\n"
                             "ุงูุญูู: ุฅู ุชุฐูุฑุช ูุฑูุจูุง ุฃููู\n"
                             "ุฅู ุทุงู ุงููุตู: ุฃุนุฏ ุงูุทูุงู\n"
                             "ููุงุฑุฉ: ูุง ููุฌุฏ"
                             )

    elif text == "ุงูุณุนู ูุจู ุงูุทูุงู":
        await mistake_detail(update,
                             "ุงูุฎุทุฃ: ุงูุณุนู ูุจู ุงูุทูุงู\n\n"
                             "ุงูุญูู: ุงูุณุนู ุบูุฑ ุตุญูุญ\n"
                             "ูุง ุงูุนููุ ุฃุนุฏ ุงูุณุนู ุจุนุฏ ุงูุทูุงู\n"
                             "ููุงุฑุฉ: ูุง ููุฌุฏ"
                             )

    elif text == "ุชุฑู ูุงุฌุจ":
        await mistake_detail(update,
                             "ุงูุฎุทุฃ: ุชุฑู ูุงุฌุจ (ูุจูุชุ ุฑูู)\n\n"
                             "ุงูุญูู: ุงููุณู ุตุญูุญ\n"
                             "ุงูููุงุฑุฉ: ุฏู (ุฐุจุญ ุดุงุฉ)\n"
                             "ุชูุจูู: ูุง ุตูุงู ุจุฏูู"
                             )

    elif text == "ุงูุฌูุงุน":
        await mistake_detail(update,
                             "ุงูุฎุทุฃ: ุงูุฌูุงุน ูุจู ุงูุชุญูู ุงูุฃูู\n\n"
                             "ุงูุญูู: ููุณุฏ ุงููุณู\n"
                             "ูุง ูุฌุจ:\n"
                             "- ุฅููุงู ุงูุญุฌ\n"
                             "- ุงููุถุงุก ูู ุนุงู ูุงุฏู\n"
                             "- ุฐุจุญ ุจุฏูุฉ (ุฌูู)"
                             )

    elif text == "ุงูุฎุฑูุทุฉ":
        await map_menu_show(update, context)
    elif text == "ุงููุณุฌุฏ ุงูุญุฑุงู":
        await send_haram_location(update, context)

    elif text == "ุงูุตูุง":
        await send_safa_location(update, context)

    elif text == "ุงููุฑูุฉ":
        await send_marwah_location(update, context)

    elif text == "ุฃุฎุทุงุก ุดุงุฆุนุฉ":
        await mistakes(update, context)
    elif text == "ุฑุฌูุน ูููุงุฆูุฉ ุงูุฑุฆูุณูุฉ":
        await start(update, context)

    elif text == "ูููุงุช ุงูุฅุญุฑุงู":
        await update.message.reply_text("ุงุฎุชุฑ ุงูููุทูุฉ:", reply_markup=markup_miqat)

    elif text == "ุงูุดุงู (ุณูุฑูุงุ ูุจูุงูุ ุงูุฃุฑุฏูุ ููุณุทูู)":
        await miqat_sham(update, context)

    elif text == "ูุตุฑ ูุดูุงู ุฃูุฑูููุง":
        await miqat_egypt(update, context)

    elif text == "ุงูููู":
        await miqat_yemen(update, context)

    elif text == "ุฑุฌูุน":
        await start(update, context)

    else:
        await update.message.reply_text(
            "ุงูุฑุฌุงุก ุงุฎุชูุงุฑ ุฒุฑ ูู ุงููุงุฆูุฉ",
            reply_markup=markup_main
        )
# ================= ุชุดุบูู ุงูุจูุช =================

app = ApplicationBuilder().token(TOKEN).build()

app.add_handler(CommandHandler("start", start))
app.add_handler(MessageHandler(filters.TEXT & ~filters.COMMAND, reply))

print("ุงูุจูุช ูุนูู ุงูุขู...")

app.run_polling()
